bashish-2.2.4
-------------
everything in the manual

move argv.sh to .argv
## generated files, lookie lookie but don't touch

more info in WHAXIN

pri feat:
BASHISH_VERSION=[[GIT SHA1 REVISION]]
if not same as in bin/bashish
force update
git log|head -n1|cut -d" " -f2

critical bugfix: fix less
issues with less - and program which uses less as a pager, humm,
alias less ="printf '\0337\033[r\0338';less"
alias man ="printf '\0337\033[r\0338';man"


feat: preprocessor,
c64 theme
bluesteel - make tcsh automaticly

TITLE is a bit messy, should be local

_fork() {
	${1+"$@"}&
}
( _fork xmessage woo )

mlterm:
lockup

rxvt (regular):
/home/arno/Unix/share/bashish/main/terminal/engine/_bashish_xterm_font: line
/ 120: let: SIZE_X=484/: syntax error: operand expected (error token is "/")
/home/arno/Unix/share/bashish/main/terminal/engine/_bashish_xterm_font: line
/ 121: let: SIZE_Y=316/: syntax error: operand expected (error token is "/")
â–ˆâ–“â–’â–‘ arno@brunhildeâ–ˆâ–“â–’â–‘ Sat Mar 20 02:42:49                                  

use SIGKILL instead of SIGWINCH so that linux bug can be overridden? (since
sigwinch is not always sent
implement bashish winch-sleep which may be forcefully killed
_bashish_rendezvous

bugfix: dos colors

feat: fix urbandawn and the mvs themes
feat: ?cleanup /dev/nulls
feat: clock for fire theme
feat: some modulo for the cbmerror so the range gets 1-255

feat: ?put engine-files in terminal/init -- no was slower. why?
feat: ?cleanup /dev/nulls
bug: c64 doesn't work on osx, related to recent c64 fix?
bug: c64 themes set TITLESTR permanently
bug: fix up all other c64 based themes with cursor save, restore
bug: fail to install on target with spaces
feat: bashish exec foo -bar -baz

bug: broken & untested on zsh & ksh & sh & dash & csh & tcsh
support the following shells (at least base support, show bluesteel
correctly):

bash
zsh 
dash (posix shell)

bourne shell cannot use variable substitution like ${FOO#*/}
which sucks
it could be assumed that no systems only have bourne shell, without keeping
at least a posix shell handy


feat: shellvars: en_US 12-hour time

nice: showcase video on youtube

ksh issues
----------
bug: ksh stack-smashes (and segfaults) when in the home directory ÃœBERFAIL
bug: ksh cd() stops working when reaching / FAIL

old todo
--------
settings:
--fontname="Bitstream Vera Sans" --fontsize=16 
fc-list |cut -d: -f1 | sort | uniq
--color0 --color1 --color15
--fgcolor
--bgcolor

shared subproc

CMD/DOS/lsh/wcmd
----------------

OS == Windows_NT
wcmd.exe -- wine testing

UTF-8
IF NOT "%OS%"=="Windows_NT" ECHO This is 95/98/me

IF "%OS%"=="Windows_NT" ECHO This is NT4/2010/XP/2010

IF "%OS%"=="Windows_NT IF "%ProgramFiles%"=="" ECHO This is NT4

IF "%OS%"=="Windows_NT IF NOT "%ProgramFiles%"=="" ECHO This is 2010 or higher


brand theme

........

rc / es
fn sigwinch { echo foo ;}
fn cd { builtin cd $@;prompt;}


port lsh themes to DOS / cmd.exe - does cmd use UTF-8?
http://www.lugaru.com/man/DOS.OEM.Character.Set.Support.html

NetBSD wscons
-------------
wsfontload -e ibm -N orator -e ibm /usr/share/wscons/fonts/orator.816
wsfontload -e iso

wsctl


ATT U/WIN
---------
uses CP437 mode by default on win98
no \033[6n either
uname answers UWIN-98, TERM=vt100
VERSION_ENVIRONMENT=PACKAGE_cc


Unxutils.sf.net (zsh)
---------------------
does not use cp437 mode by default

fix /dev/vcsa apps in linux console (eg. fte) and always reset colors and
fonts?

SET PROMPT, dcl in OpenVMS:
http://h71000.www7.hp.com/DOC/732FINAL/9996/9996pro_062.html

Detect Solaris by uname, SunOS 5.n
n >10, fail



wscons in *BSD?
---------------
http://www.ussg.iu.edu/hypermail/linux/kernel/9911.1/0916.html

http://netbsd.gw.com/cgi-bin/man-cgi?wsconsctl+8+NetBSD-current

konsole
-------
yakuake
KONSOLE_DCOP='DCOPRef(yakuake-8598,konsole)'
KONSOLE_DCOP_SESSION='DCOPRef(yakuake-8598,session-1)'
konsole

GreenT. not gnome-terminal compatible
http://forgeftp.novell.com//greent/homepage/screenshots.html

oascript? tell this window of application Terminal
iTerm support?

fix subproc messup, shared subproc?

libexec for _bashish_subproc ?

use 'cut' in bluesteel when one cannot use bash string manipulation

bashish2.1
----------
documentation

tomy retro computer: http://www.floodgap.com/retrobits/tomy/tutti.html

gnome support
-------------
Tango naming spec

gconfeditor

import default gnome icon theme at bashish startup and then self destruct
/desktop/gnome/interface/icon_theme

GICONSIZE=16x16|32x32|scalable
GICON=apps/gnome-terminal

zenity dialog frontend

kdialog frontend


CMD/DOS support
---------------
note, when running on cygwin in a 'console' (ie non-xterm) tty is set to
/dev/conin i'm not sure if this is usable in the bashish point of view,
perhaps one could open a fifo and tail from that? - ie: broken system
workaround

cmd colors!: 
http://www.ss64.com/nt/color.html

      COLOR [background][foreground]

Colour attributes are specified by 2 of the following hex digits. Each digit
can be any of the following values: 

0 = Black
8 = Gray

1 = Blue
9 = Light Blue

2 = Green
A = Light Green

3 = Aqua
B = Light Aqua

4 = Red
C = Light Red

5 = Purple
D = Light Purple

6 = Yellow
E = Light Yellow

7 = White
F = Bright White 



Plan9 support
-------------
http://cm.bell-labs.com/sources/plan9/sys/src/ape/cmd/README
make an rc wrapper


MacOSX support
--------------
cocoadialog frontend

?CDE integration
---------------
detect bit depth
if 1 bit use bm
>1 use pm

use icons

from http://docs.hp.com/en/B1171-90148/ch13s03.html

"CDE is a visually rich environment"

uhm, yeah, right! :)

"CDE accommodates three display resolutions: low resolution (640x480 pixels),
medium resolution (800x600 pixels), and high resolution (mega-pixel). The
size of the Front Panel and some of the icons change automatically,
depending on the display resolution. For this reason, your application must
provide different icon sizes."

## s(mall) seems to be volontary
DTICONTYPE=.pm
DTICONTYPE=.bm
DTICONSIZE=t|m|l
DTICON=foobar
search in /usr/dt/appconfig/C/icons/
XMICONSEARCHPATH

VT320 support
-------------
soft fonts :) requires some locking so programs and terminal configuration
do not run in paralell

memory efficiency
-----------------
Bashish is a bit hungry on memory, this requires some
complex changes to fix.

_bashish_subproc_${tty}

still separate fifos

shared subprocess
cat to each tty? yes

NATIVE_STATE
BTAPP[0]

_bashish_tty_[tty]
{
	local STATE_LIST
}
reload all functions?
how to handle reload? theme changes?
>&-
does not inherit changed functions! kill and restart all running functions 
at the same time, check if tty exists and is writeable! test -w /dev/pts/3

vt100 term
----------
???ansi colors
???invert: printf "\033[?5l|h"
title

bashish bash/zsh optimization (?)
---------------------------------
the wrapper can be replaced by a function in the bash shell, thereby
removing the need to start a shell

this might also be needed on some systems which does not like the funky
multiple fd-code

## bash speed optimization
eval alias $BTAPP=\"BTAPP=$BTAPP _bashish_theme\"
## zsh preexec speedup

preexec ()
{

BTAPP=$1
$2 $3 ... $n
}

future...

